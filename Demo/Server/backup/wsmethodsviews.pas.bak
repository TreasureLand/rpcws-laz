{*****************************************************************}
{                 JSON RPC Web Service Library                    }
{                                                                 }
{ by Fernando Pasqueto fpasqueto@gmail.com                        }
{                                                                 }
{*****************************************************************}

unit wsmethodsViews;

{$mode objfpc}{$H+}

interface

uses
  Classes, SysUtils, jwstypes, fpjson, jsonparser, servermethods, jwsjson, db,
  s7sconn, S7SProvider, RUtils, jwsconsts;

type

  { TJWSMethodsViews }

  TJWSMethodsViews = class(TJWSServerMethods)

  private

  published
    function PesquisaPessoas(): TJSONStringType;
  end;

  { TJWSMethodsPessoas }

  TJWSMethodsPessoas = class(TJWSServerMethods)
  private
  published
    function Pesquisa(): TJSONStringType;
    function cadastro(): TJSONStringType;
    function delete(): TJSONStringType;
  end;

implementation

{ TJWSMethodsPessoas }

function TJWSMethodsPessoas.Pesquisa: TJSONStringType;
begin
  Result := JSON_RESULT_OK;
end;

function TJWSMethodsPessoas.cadastro: TJSONStringType;
begin
  Result:= JSON_RESULT_OK;
end;

function TJWSMethodsPessoas.delete: TJSONStringType;
begin
  Result:= JSON_RESULT_OK;
end;

{ TJWSMethodsViews }

function TJWSMethodsViews.PesquisaPessoas(): TJSONStringType;
var ADBConnector : TS7SDBConnector;
    AQuery       : TS7SQuery;
begin
  try
    ADBConnector := TS7SDBConnector.create('');
    AQuery:= TS7SQuery.create(nil);
    AQuery.DBConnector := ADBConnector;
    with AQuery do
    begin
      Close;
      sql.Clear;
      sql.Add('');
    end;
  finally
    AQuery.Free;
    AQuery:= nil;
    ADBConnector.Free;
    ADBConnector:= nil;
  end;
end;

end.

